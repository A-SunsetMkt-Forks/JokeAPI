// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//#MARKER models

model User {
  userId     String       @id @unique
  username   String
  Submission Submission[]
}

model Submission {
  userId       String
  submissionId String
  categories   Category[]
  type         JokeType
  joke         String
  joke2        String?
  flags        Flag[]
  lang         String
  User         User       @relation(fields: [userId], references: [userId])

  @@id([userId, submissionId])
}

model Joke {
  categories Category[]
  type       JokeType
  joke       String
  joke2      String?
  flags      Flag[]
  lang       String
  id         Int        @default(autoincrement())

  @@id([id, lang])
}

//#MARKER enums

enum Category {
  Misc
  Programming
  Dark
  Pun
  Spooky
  Christmas
}

enum JokeType {
  single
  twopart
}

enum Flag {
  nsfw
  racist
  religious
  political
  sexist
  explicit
}
